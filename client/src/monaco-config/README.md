# Themes

Themes can be added in one of two ways (method 2 seems to work better?â€”see note below):

1. Pull `.json` VS Code themes from VS Code extensions (for instance, `~/.vscode/extensions/zhuangtongfa.material-theme-3.11.4/themes/OneDark-Pro-flat.json`). Then run, e.g., `npx monaco-vscode-textmate-theme-converter -i ~/Downloads/OneDark-Pro-flat.json -o themes/dark.json` to convert the VS Code JSON to Monaco JSON.
2. Find a `.tmTheme` file online, e.g., on https://tmtheme-editor.herokuapp.com/. (Some good ones seem to include Calydon and Apple Pips, though the latter is a bit lacking in contrast. Beware of some of these themes' strange practice of making keywords and types the same color.) Then use https://bitwiser.in/monaco-themes/ to convert the `tmTheme` plist into a Monaco JSON file.

Note: for some reason, the theme generated by method 1 doesn't copy background/foreground colors for the editor. To copy these, go to the original VS Code theme and find `editor.foreground` and `editor.background` in the `colors` object. Then paste these into new entries at the top of the `rules` array in the Monaco theme as follows:
```json
{
  "background": "[editor.background]"
},
{
  "foreground": "[editor.foreground]",
  "token": "source"
}
```
For instance, for the [Atom One Dark theme](https://github.com/akamud/vscode-theme-onedark), these values are `#282C34` and `#ABB2BF`, respectively.

It may also be necessary to change some CSS properties. For instance, the Atom themes use `white` and `inherit` as property values, which Monaco doesn't accept.

Lastly, some light themes might use `vs-dark` as their base, which makes the command palette look terrible. Switch the base to `vs` to resolve this issue.

Current theme is Atom One Dark/Light. Previously considered [RoRvsWild](https://www.rorvswild.com/theme).

# Language Grammars

To generate the language grammar JSON file, use one of the two following methods (though note that the stock TM grammar doesn't seem to capture a number of important tokens; the original VS Code Standard ML extension seems most promising).

1. Pull the TextMate grammar file (e.g., https://github.com/textmate/standard-ml.tmbundle/blob/master/Syntaxes/Standard%20ML.plist) and then use `plutil -convert json grammar.plist -o sml.tmLanguage.json` to generate a JSON version.
2. Copy an existing VS Code `.tmLanguage.json` file (or, in the case of the SML extension, just `.json`) into this directory.

# monaco-tm

Based on [monaco-tm](https://github.com/bolinfest/monaco-tm), which seems to allow TextMate grammars to work properly (unlike the `monaco-editor-textmate` approach).